091823

Visuals:

- foreground:

  - CameraForeground plants:
    - adjust sprites used

- Background:

  - revisit bg layer sprites
  - more regular bg trees
  - use these to fill in upper levels of palms
  - add bg vines to bg trees (remove bg vines layer)
  - more foliage
  - Resize Large flat bg trees
  - experiment with parallax
  - Add background layer of bg lightshafts; Maybe could setup on a Bg Tree prefab; They are more transparent and only affect background (or nothing)

- Trees:

- Vines:

  - Test using rb.Sleep when they are out of range //tested NoSleep and No active control on PC; not wbgl;
  - Consider running time forward at high speed while trees/vines are being placed in order to get them to settle into resting positions
    - this will probably require in-scene loading wait after trees have been placed; i.e place trees, run time forward, then fade in
  - Consider testing a linerenderer deactivation on out of range
  - ensure vineRoot (and probably all objects are destroyed after falling below a given y value)

  - Find and implement snappier snap sound.
    - use curent snap sound as the impending snap sound
  - Increase volume on vine sfx

- Misc:

  - Consider adding particle effect that resembles small insect or swarm of insect that
  - Add cheering sfx after player killed with arrow; maybe also aim arrows more at the hat
  - Arrows should aim at player +/- some degree; This ensures levels with higher trees don't allow the player to climb out of range.

- Lights:

  - Experiment with RenderSettings (light render texture scale, etc.) in Settings folder/Renderer2D

- Player:

  - Fix Swinging unpause
  - Check Amulet Colliders (might be the win platform collider, or the new player colliders; if the latter, try changing torso to box collider and ensure settings match orig collider.)

  - Add dust poof when player lands on platform

  - If player lands on a vine while climbing, momentum is not carried; They just stick; This is mostly just prominent on mobile
  - consider preventing climb if actively applying horizontal movement

  - Try to see if we can not send/recieve force between legs and platform to avoid springboarding

  - Needs better death anim and sound.
  - Death by arrow does not trigger game over; Only Water does.

    - On death by arrow; Set short timer, then trigger game over if it's not already triggered by water.

  - Ensure player sound stops on pause (noticed that, if paused after a single "whoa" was played, the "whoas" continue while paused)
  - Consider adding the really long "whoa" as the second whoa sound after the first.

  - Player IK:
    - Experiment w/ IK anims
      - I think we can then use a full RB ragdoll that has no sprites, and just update the Player Sprite IK Targets to those positions ?
        - This might allow for better anims for things like landing on a platform, we can move the torso target slightly downward on impact, causing player to bend their legs and then re-extend to recover.
        - Could also allow player to look more around at the vines he's close to while mid-air; Same with hands
      - Walking anims can be made better just by reanimating with IK; Or can be made procedural by using the raycast method.
      - On Jump, when btn pressed down, have player semi-crouch to prep for the jump, and on release have them extend into the jump

- Factories:

  - change "Generate" methods to "Instantiate"
  - FactoryConfigs should maybe be changed to Blueprint and keep the object config ; EnvironmentObject is currently the opposite of this
  - consider changing scales to scale multipliers instead of applying absolute scaling

  - for mobile climb; may need to setup custom control that allows player to slide finger above and below the grab button (while grabbing)
    ... to climb up and down;

- Water:

  - try adding player collider and mask that allows player to enter the water while swinging, but it slows them down (increase linear drag on player while in water (proportional to pct of player in water)); Add splash drag sound and some particle effect;

- Set up player spawn point object;

  - set one up on StartPlatform prefab

- make section tester (take layers, regenerate on validate, enable disable tree layers), allow converting to a preset

- Physics:

  - review Physics 2d settings; may help with vine stability

\*\* CHECK PHONE 092223 NOTES

==========================================================================================

\*\* FOR WEBGL BUILD: 092923

- Review Physics solver iteration count (set to 50!?) and seems fine.
- Reduce lighting quality
  - light render texture
  - shadow quality
  - shadow distance
    -- find out about lighting settings per pixel vs per vertex

==========================================================================================

- UI
  -dl font ("Super easy")

  - Main Menu

    - Add options screen // Added;

      - quality settings:
        - adjusts lightshaft number;
        - shadow quality
        - lighting quality (adjust light texture)
        - Vsync

    - start menu vines position incorrect; try using camera space with transpaent panel, anchor the title and vines to anchors rectTransforms on title.

    Escape/Pause Menu: - stylize - add current stats

    - may need to manually set grab to true if player was grabbing on pause
    - include seed for copying

  - Add zone near amulet that, on enter, triggers "I can see the amulet ahead text"
  - review about page (add link elsewhere)
  - review intro text
  - change start menu upper right text (Made in x days... etc.)

  - dont show keyboard control tutorial text if on mobile
    - also, provide option to stop it from showing up; and/or auto stop after ngames

MobileUI:

- Setup UI inputs based on GameContext //Ignoring for now.
- hide mobile ui controls on gameover.
- ipad webgl controls sometimes cause inadvertent pinch to minimize
- Controls:
  - Try vertical movement button alternatives. (using joystick makes it too easy to accidentally climb/slide)
    - you could also increase the vertical movment distance and add a dead zone.

==========================================================================================

- Data Persistance: - set up save/load for: - settings - scores and stats

      - Use ScriptableObject PlayerData
      	- Allow different characters? enter name?
      	- Save stats PlayerPrefs.setString(${playerName}+"/"+stats+"/"+maxSwing, etc
      		... same with cloth colors;
      		... Add to currency? Allow colors and clothing items bought with currency?

      	- ** Use ToJsonUtility
      		- we can save serializable classes
      		- try saving json string to string in player prefs; otherwise might need to check how Application.persistantDataPath works in webgl
      		- Setup a serializable class that represents the data to be saved, eg. PlayerStats
      - Fix save

==========================================================================================

- Gameplay:

  - Modes:

    - ArcadeMode (with jump) ?
    - EndlessMode: both sandbox and progressive difficulty:

      - achieve by generating sections of fixed length
        ... when player is nearing the end of the section (use some object as reference),
        ... generate a new section starting at the end of the old one and move or recreate the reference obj to the end of the new section;

        - For progressive difficulty, you can just increase spacing, height variance, vine weakness, and maybe chance of enemy encounter
          ... for enemy encounter, have the enemy engage from behind and last a period of time or for fixed distance that player must travel.. music fades out after the player escapes.

      - EndlessMode: review placement of new sections; ensure they're accounting for parallax

        - seems to be weird artifacts when new section is generated; Also maybe seems like bg might be overllaping? but don't see how.
        - You could also just init endless mode to be a really large length, then start extending if the player ever gets there.
        - Or, you could init a large initial section, then init the next section one layer at a time, depending on how close the player gets; so should be less noticable.
        - similarly, progressive danger mode can be sorted out ahead of time, each section placed at the beginning; then at the end, just extend the most difficult chunks.
        - Also, look into async instantiation; Maybe via coroutine to avoid stutters.. this might allow extending by larger chunks at a time.
          - maybe try corutine that instantiate one object per frame? yield waitfroendofframe
        - Maybe try using static Factories; Time the generation time of a length 10000 chunk with and without statics;

        - Or reuse objects from the beginning, reposition them every N units of distance, store the old positions in an array, and you can place them back if the player goes backward.

- Implement Difficulty coefficient and integrate it with treeSpacing, height, vine strength/pctWeak, pctChanceEnemyEncounter

- Setup Reusable Sections for endless mode

- Endless Format:

  - Player Travels and can reach platform check points where they can stop/save and perform actions

- Setup "practice"/"tutorial" section that has land?

- with character progression, Allow player to hire "rescue parties" (purchased as an item), which is consumed for each fail.
  ... if the player fails but owns a rescue party, their character will be rescued and preserved.

==========================================================================================

# \*\* Check phone notes 092023

======= DONE: ===============

- platforms should slow player movement so they don't slide off.
- Add climbing instructions to Controls UI notification
- replace bg bottom gradient
- Level Edges: test bg
- move vine adornments into single object;
  - use scriptable object sprite pool to get a random adornment sprite;
- fix ground
  vines: - when they break, add bouancy; Need to scale hat buoyancy wider
- changing level messed up splash position
- vine anchor segment: remove disable hinge
- Whereever else references a list of sprites, also move that into a sprite pool scriptable obj
- LightShaftFactory: review todo about Finding distance to ground before setting rotation
- Remove manual seed set before prod;
- palms5 has upside down palm
- Add random palm rotation
- Escape/Pause Menu: When pressing escape, pause and show menu - contains: - restart button - new game option
- fix fps and escape buttons on webgl
- Add Start and End vines
- Fix Vines at startMenu (missing now because we need the factory to generate)
- Fixed palm flickering
- Replace VineOverrideZone with manualTree placement; This ensures a vine is near.
- Set foliage in front of trees to be behind vine
- Update palm sorting
- Add vine links in Root; experiment with line renderer; On break, split vine at that index, add VineLine to that segment
- adjust death trigger y pos
- In SwingingController, replace getNextSegment with VineSegment.GetNextSegment/GetPrevSegment; This will reference VineRoot.GetSegmentAtIndex
- Also, ensure detached segments are re-indexed
- Ensure water death trigger still works if player is grabbing onto detached vine
- Add mobile controls and test
- use Application.isMobileBrowser() to id mobile webgl devices
- IntroText scene: increase fade in text rate
- on webgl, set lightshaft blend style to multiply; Disable shadows //Not required
- Legs are backward on mobile
- player: accidentally messed up movement speed with new input system; fix.
- update pause menu script
- setup pause, escape, fps controls in new input system
- Add game context setup in gamemanager.
- finish setting up mobile pause
- figure out pause/escape for mobile
  - upper right (or upper left for left-handed controls): Use double tap action to show a pause icon or menu button/icon
    ... on action started, show the icon.
- add mobile restart (alt to "press r")
- set up mobile button restart and quit
- set up pause button in controls
- GameOverUI: Esc does not allow exit/pause
- fix vines position main menu
- On win, allow restart/menu
- Arrows: - review collider and ensure they are hitting swingables
- Setup Trunk Prefabs with palm placement anchors
- update tree factory to use these.

  - tree layer sorting:

    - upper/larger palms should be positioned in front of lower palms
    - larger trunks should be positioned behind smaller trunks

      - assume layer 0 is front-most; set trunk sort to baseTrunkSort - layerNum; set palm sort to base palm sort \_ layerNum
        ... Palms: TreeFactory.palmSortOrderList.Count + 10 \* layerNum + 1
        ... Trunks: TreeFactory.baseTrunkSortOrder - layerNum

        - Update: did this, but realized it locks us into the assumption that each new layer of trees must be "larger" than the previous.
          - To fix this, need to devise a system that generates a sorting range by scale (and maybe Y height)
            - maybe multiply palm scale by 100 (or some number) and offset by the random sort order from the range.
              -- maybeee baseOffset + trunkHeight(\* or +) palmScale
          - Update 093023: Got something mostly working; good for now; may revisit layer.

- Setup bare bones options screen with TouchScreen textbox; init with isMobilePlatform.

  - Add to AppSettings in GameContext;
  - then consumers can reference AppSettings.isTouchScreen in GameContext to init
    - find and replace refs to isMobilePlatform

- walking back and forth causes grunt noise; adjust bottom collider and legs colliders
- fix sand // Replaced with ground
  - at least use thinner grafient + some shading

CameraForeground Foliage: - spacing; Lower offset - add angle

- the vine segment anchor needs to be same size as the segments
- Setup Launch Files and fill in tasks

======================================================
======== Skipped/Returned/Replaced =============

vines:

- for climbing: Try having player hinge onto a special object that is attached to the vine via a distance joint. //Tried & failed 093023
  - then, when climbing, set the distance joint to the target segment, and reduce the distance over time..Then update the target segment as the climb continues... might allow for smooth climb
- Double check FlipX on transform; should probably be applying directly to // checked; Tried rotate by Y instead; Sticking with current method for now.
